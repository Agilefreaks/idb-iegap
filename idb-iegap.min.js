navigator.userAgent.indexOf("Trident/")!==-1&&function(n,t){function v(n,t){return typeof t!="object"&&(t=t()),Object.keys(t).forEach(function(i){n[i]=t[i]}),n}function y(n){return{from:function(t){return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,{extend:function(i){v(n.prototype,typeof i!="object"?i(t.prototype):i)}}}}}function r(n,t){if(typeof n=="object")Object.keys(t).forEach(function(i){var u=Object.getOwnPropertyDescriptor(n,i),r=t[i](u);r.hasOwnProperty("value")&&r.writable!==!1&&(r.writable=!0);Object.defineProperty(n,i,v({configurable:!0,enumerable:!0},r))});else return t(n)}function l(n,i){var f,r,o,s,u,e;if(n.hasOwnProperty(i))return n[i];if(!i)return n;if(typeof i!="string"){for(f=[],r=0,o=i.length;r<o;++r)s=l(n,i[r]),f.push(s);return f}return(u=i.indexOf("."),u!==-1)?(e=n[i.substr(0,u)],e===t?t:l(e,i.substr(u+1))):t}function b(n,i,r){var u,h,e,f,s,o;if(n&&i!==t)if(Array.isArray(i))for(u=0,h=i.length;u<h;++u)b(n,i[u],r[u]);else e=i.indexOf("."),e!==-1?(f=i.substr(0,e),s=i.substr(e+1),s===""?r===t?delete n[f]:n[f]=r:(o=n[f],o||(o=n[f]={}),b(o,s,r))):r===t?delete n[i]:n[i]=r}function k(n){var t,i,u,r;if(!n||typeof n!="object")return n;if(Array.isArray(n))for(t=[],i=0,u=n.length;i<u;++i)t.push(k(n[i]));else if(n instanceof Date)t=new Date,t.setTime(n.getTime());else{t=n.constructor?Object.create(n.constructor.prototype):{};for(r in n)n.hasOwnProperty(r)&&(t[r]=k(n[r]))}return t}function st(n,t,i,r){return function(u){var f=n&&(r?"Fatal":"Warning")+": IEGap polyfill failed to "+(n.call?n():n)+": "+u.target.error;if(n&&console.error(f),i&&(u.stopPropagation(),u.preventDefault()),t)t(u);else if(!i)throw new Error(f);}}function fi(n){return st(n,null,!1,!0)}function ht(n,t){return st(n,t,!0)}function oi(){for(var n=4;n>=-4;--n)d[n]=Math.pow(32768,n)}function lt(n,t,i){for(var r=t-1,o=n<0?32767:0,s=n<0?-n:n,u="",f,e;r>=-i;)f=s/d[r]&32767^o,e=f<<1|1,u+=String.fromCharCode(e),--r;return u}function rt(n,i,r,u){var e=0,o=i-1,h=n.length,f,s;if(i+r!=h)return t;for(f=0;f<h;++f)s=n.charCodeAt(f)-1>>1,u?e-=d[o]*(s^32767):e+=d[o]*s,--o;return e}function u(n,t){var e,f,r,i,o;if(!n||!Array.isArray(n))return null;for(e=n.length,f=new Array(e),r=0;r<e;++r)if(i=n[r],typeof i=="string")f[r]=vt+i;else if(typeof i=="number"){if(isNaN(i))return null;f[r]=i===-Infinity?kt:i===Infinity?pt:(i<0?bt:wt)+lt(i,5,4)}else if(i instanceof Date)f[r]=yt+lt(i.getTime(),4,0);else if(Array.isArray(i)){if(i===n||t&&t.indexOf(i)!==-1||(o=u(i,t?t.concat(n):[n]),!o))return null;f[r]=at+o}else return null;return JSON.stringify(f)}function s(n){for(var e=JSON.parse(n),o=e.length,h=new Array(o),f=0;f<o;++f){var c=e[f],r=c[0],u=c.substr(1),i=t;r===vt?i=u:r===wt?i=rt(u,5,4,!1):r===bt?i=rt(u,5,4,!0):r===yt?i=new Date(rt(u,4,0)):r===pt?i=Infinity:r===kt?i=-Infinity:r===at&&(i=s(u));h[f]=i}return h}function ut(n,t){return typeof n=="string"||typeof n=="number"&&!isNaN(n)||n instanceof Date&&!isNaN(n.getTime())||Array.isArray(n)&&si(n,t||[])}function si(n,t){var i=t?t.concat(n):[n];return n.every(function(i){return i===n||t&&t.indexOf(i)!==-1?!1:ut(i,t?t.concat(n):[n])})}function dt(n){return n.transaction.db._iegapmeta.stores[n.name]}function nt(n,t,i){n._iegapmeta=i;t.objectStore("$iegapmeta").put(i,1)}function p(n){if(Array.isArray(n))return u(n);if(n instanceof c){var t=Array.isArray(n.upper)?u(n.upper):n.upper,i=Array.isArray(n.lower)?u(n.lower):n.lower;return n.lower===null?e.upperBound(t,n.upperOpen):n.upper===null?e.lowerBound(i,n.lowerOpen):e.bound(i,t,!!n.lowerOpen,!!n.upperOpen)}return n}function w(n,i,r){function o(){--u==0&&i&&i(e)}var u=n.length,e=0,s=r.swallowErrors===t||r.swallowErrors===!0;if(u===0){i&&i();return}n.forEach(function(n){var t=f.ObjectStore[n.op].apply(n.store,n.args);t.onsuccess=function(t){n.result=t.target.result;++e;o()};t.onerror=function(t){s&&(t.stopPropagation(),t.preventDefault());n.error=t.target.error;o()}})}function ft(n,i,r,f,e,o){var h,a,s,c,v;(Array.isArray(r)&&(r=u(r)),h=l(i,f.keyPath),h!==t)&&(a=n.objectStore(f.idxStoreName),f.compound?(v=u(h),v&&(s={fk:r,k:v},c=u([r,v]),e.push({store:a,op:"add",args:[s,c],mainOp:o}))):f.multiEntry&&(Array.isArray(h)?h.forEach(function(n){ut(n)&&(s={fk:r,k:n},c=u([s.fk,s.k]),e.push({store:a,op:"add",args:[s,c],mainOp:o}))}):ut(h)&&(s={fk:r,k:h},c=u([s.fk,s.k]),e.push({store:a,op:"add",args:[s,c],mainOp:o}))))}function et(n,t,i,r,u){this._idx=n;this._store=t;this._compound=Array.isArray(r);this._multiEntry=u;this.keyPath=r;this.name=i;this.objectStore=t;this.unique=n.unique}function tt(n,t,i,r,u,f){this._cursor=n;this._store=i;this.direction=n.direction;this.key=u;this.primaryKey=r;this.source=t;arguments.length>=6&&(this.value=f)}function gt(){this._el={}}function o(n,t,i){this._el={};this.source=n;this.transaction=t;this.readyState="pending";var r=this,u={get:function(){return r}};i(function(n,t){r.result=t;Object.defineProperty(n,"target",u);r.readyState="done";r.dispatchEvent(n)},function(n,t){r.error=t||n.target.error;Object.defineProperty(n,"target",u);r.readyState="done";n.type!="error"&&Object.defineProperty(n,"type",{get:function(){return"error"}});r.dispatchEvent(n)},this)}function ni(n,t,i){o(n,t,i)}function h(n,t,i){var r=t.transaction.$iegQue;if(!r||r.length==0)return o(n,t.transaction,i);o(n,t.transaction,function(n,t,u){r.push(function(){i(n,t,u)})})}function ti(n,t){var i=n.$iegQue;i&&i.length!=0?i.push(t):t()}function hi(n,t){var i=n.$iegQue||(n.$iegQue=[]);i.push({execute:t});i.length===1&&it(n)}function ot(n){o(n.store,n.store.transaction,function(i,r,u){var f=n.store,a=f.transaction,o=a.$iegQue||(a.$iegQue=[]),y=n.op,c=y=="delete"?n.args[0]:f.keyPath?l(n.args[0]):n.args[1],s=c!==t&&f.name+":"+c,e,h;v(n,{trigSuccess:i,trigError:r,req:u,key:c});y!="delete"&&(n.args[0]=k(n.args[0]));o.length<=1||(e=o[o.length-1],e.execute)||e.keys.hasOwnProperty(s)?(h={ops:[n],keys:{},autoIncStores:{}},s?h.keys[s]=!0:h.autoIncStores[f.name]=!0,o.push(h),o.length==1&&it(f.transaction)):(e.ops.push(n),s?e.keys[s]=!0:e.autoIncStores[f.name]=!0)})}function ii(n){Object.keys(n.$iegapAutoIncs).forEach(function(t){f.ObjectStore.put.apply(n.objectStore(a),{currentAutoInc:n.$iegapAutoIncs[t]},t).onerror=fi("saving current autoIncs")})}function ci(n,t,i){function f(){--r&&i()}var r=t.length,u;if(r===0)return i();u=n.objectStore(a);t.forEach(function(t){u.get(t).onsuccess=function(i){n.$iegapAutoIncs[t]=i.target.result;f()}})}function li(n){return n.transaction.$iegapAutoIncs[n.name]++}function ai(n,t){if(!isNaN(t)){var i=n.transaction.$iegapAutoIncs,r=i[n.name];t>=r&&(i[n.name]=t+1)}}function it(n){var t=n.$iegQue,i,r;if(!t||t.length===0)return ii(n);for(i=t[0];typeof i=="function";){if(t.shift(),i(),t.length==0)return ii(n);i=t[0]}if(i.execute){i.execute(function(){t.shift();it(n)});return}r=i.ops;ci(n,Object.keys(i.autoIncStores),function(){pi(n,r);wi(n,r,function(i){w(i,function(){vi(i,r);r.forEach(function(n){var t=f.ObjectStore[n.op].apply(n.store,n.args);t.onsuccess=function(i){return n.trigSuccess(i,n.resultMapper?n.resultMapper(t.result):t.result)};t.onerror=function(i){return n.trigError(i,t.error)}});t.shift();it(n)})})})}function vi(n){n.forEach(function(i){var r,u;i.error&&(r=i.mainOp,r.op="delete",r.args=[t],u=n.filter(function(n){return n.mainOp===r&&n!==i}).map(yi),w(u))})}function yi(n){var t,i,r;return n.op==="delete"?(t=n.args[0],i=s(key),r={fk:i[0],k:i[1]},{store:op.store,op:"add",args:[r,t]}):(t=n.args[1],{store:op.store,op:"delete",args:[t]})}function pi(n,i){i.forEach(function(n){(n.op==="add"||n.op==="put")&&n.store.autoIncrement&&(n.key===t?(n.key=li(n.store),n.store.keyPath?b(n.args[0],n.store.keyPath,n.key):n.args[1]=n.key):ai(n.store,n.key))})}function wi(n,t,i){function f(){--u==0&&i(r)}var u=1,r=[];t.forEach(function(t){var e=t.op,h=dt(t.store),i=t.key,o=Object.keys(h.indexes).map(function(n){return h.indexes[n]}),s;if(e==="add")o.forEach(function(u){ft(n,t.args[0],i,u,r)});else if(e=="put")o.forEach(function(e){++u;ri(e,i,function(u){var o=[];ft(n,t.args[0],i,e,o);o.forEach(function(n){u[n.args[1]]?delete u[n.args[1]]:r.push(n)});Object.keys(u).forEach(function(i){r.push({store:n.objectStore(e.idxStoreName),op:"delete",args:[i],mainOp:t})});f()})});else if(e=="delete")o.forEach(function(e){++u;ri(e,i,function(i){Object.keys(i).forEach(function(i){r.push({store:n.objectStore(e.idxStoreName),op:"delete",args:[i],mainOp:t})});f()})});else{s="IEGAP assert failure - bad operation: "+t.op;console.error(s);throw s;}});f()}function ri(n,t,i){var e=transaction.objectStore(n.idxStoreName),o=f.ObjectStore.index.call(e,"pk"),r=o.openKeyCursor(t),u={};r.onerror=ht("retrieving existing indexes",function(){i(u)});r.onsuccess=function(){var n=r.result;if(!n){i(u);return}u[n.primaryKey]=!0;n.continue()}}function c(n,t,i,r){this.lower=n;this.upper=t;this.lowerOpen=i;this.upperOpen=r}function ui(n){return Object.defineProperties(n,{contains:{configurable:!0,writable:!0,value:function(t){return n.indexOf(t)!==-1}},item:{configurable:!0,writable:!0,value:function(t){return n[t]}}}),n}function bi(){oi();n.open=r(n.open,function(n){return function(){var t=n.apply(this,arguments);return new ni(this,null,function(n,i,r){t.onerror=i;t.onblocked=function(n){r.dispatchEvent(n)};t.onupgradeneeded=function(n){var i,u,e;r.transaction=t.transaction;i=r.result=t.result;i._upgradeTransaction=t.transaction;i._iegapmeta={stores:{}};u=f.DB.objectStoreNames.get.apply(i);u.contains(ct)||(e=f.DB.createObjectStore.call(i,ct),e.add(i._iegapmeta,1));u.contains(a)||f.DB.createObjectStore.call(i,a);n.target=n.currentTarget=r;r.dispatchEvent(n)};t.onsuccess=function(r){var u=t.result,e,f;delete u._upgradeTransaction;u._iegapmeta={stores:{}};try{e=u.transaction(["$iegapmeta"],"readonly");f=e.objectStore("$iegapmeta").get(1);f.onerror=i;f.onsuccess=function(){u._iegapmeta=f.result;n(r,u)}}catch(o){i(r,o)}}})}});e.bound=r(e.bound,function(n){return function(t,i,r,u){return Array.isArray(t)?new c(t,i,r,u):n.apply(this,arguments)}});e.lowerBound=r(e.lowerBound,function(n){return function(t,i){return Array.isArray(t)?new c(t,null,i,null):n.apply(this,arguments)}});e.upperBound=r(e.upperBound,function(n){return function(t,i){return Array.isArray(t)?new c(null,t,null,i):n.apply(this,arguments)}});e.only=r(e.only,function(n){return function(t){return Array.isArray(t)?new c(t,t):n.apply(this,arguments)}});i.prototype.count=r(i.prototype.count,function(n){return function(t){var i=this.transaction.db._iegapmeta.stores[this.name],r,u;return(arguments.length>0&&(arguments[0]=p(t)),!i||i.metaStores.length==0)?n.apply(this,arguments):(r=this,u=arguments,new h(this,this,function(t,i){var f=n.apply(r,u);f.onsuccess=t;f.onerror=i}))}});i.prototype.get=r(i.prototype.get,function(n){return function(t){var i=this.transaction.db._iegapmeta.stores[this.name],r,u;return(arguments.length>0&&(arguments[0]=p(t)),!i||i.metaStores.length==0)?n.apply(this,arguments):(r=this,u=arguments,new h(this,this,function(t,i){var f=n.apply(r,u);f.onsuccess=t;f.onerror=i}))}});i.prototype.openCursor=r(i.prototype.openCursor,function(n){return function(t){var o=this.transaction.db._iegapmeta.stores[this.name],i,l,r,f;if(!o)return n.apply(this,arguments);if(Array.isArray(t)&&(t=new c(t,t)),i=o.compound,i&&t&&!(t instanceof c))throw new RangeError("Primary key is compound but given range is not.");return l=i&&t?e.bound(u(t.lower),u(t.upper),t.lowerOpen,t.upperOpen):t,arguments[0]=l,r=n.apply(this,arguments),f=this,new h(this,this,function(n,t){r.onerror=t;r.onsuccess=function(t){var r=t.target.result,u,e;r?(u=i?s(r.key):r.key,e=new tt(r,f,f,u,u,r.value),n(t,e)):n(t,null)}})}});i.prototype.createIndex=r(i.prototype.createIndex,function(n){function t(n,t,i,r){var u=n.transaction.db,s="$iegap-"+n.name+"-"+t,h=u._iegapmeta,y,o,c;if(r.multiEntry&&Array.isArray(i)){f.DB.createObjectStore.call(u,t,{keyPath:!0});throw"invalid access";}var l=f.DB.createObjectStore.call(u,s),e=h.stores[n.name]||(h.stores[n.name]={indexes:{},metaStores:[]}),v={name:t,keyPath:i,multiEntry:r.multiEntry||!1,unique:r.unique||!1,compound:Array.isArray(i),storeName:n.name,idxStoreName:s};return e.indexes[t]=v,e.metaStores.push(s),l.createIndex("fk","fk",{unique:!1}),y=l.createIndex("k","k",{unique:r.unique||!1}),nt(u,n.transaction,h),o=0,c=e.autoIncrement&&e.metaStores.length===1,hi(n.transaction,function(t){var i=[],r=f.ObjectStore.openCursor.call(n);r.onerror=t;r.onsuccess=function(){var u=r.result,e;if(u){try{e=u.primaryKey;c&&!isNaN(e)&&e>o&&(o=u.primaryKey);ft(transaction,u.value,e,v,i);i.length>1e3&&(w(i,null,{swallowErrors:!1}),i=[])}catch(s){console.error(s);n.transaction.abort()}u.continue()}else w(i,t,{swallowErrors:!1}),c&&f.ObjectStore.put.call(n.transaction.objectStore(a),{currentAutoInc:o+1},n.name)}}),new et(y,n,t,i,r.multiEntry)}return function(i,r,u){return Array.isArray(r)||u&&u.multiEntry?t(this,i,r,u||{}):n.apply(this,arguments)}});i.prototype.deleteIndex=r(i.prototype.deleteIndex,function(n){return function(t){var i=this.transaction.db,e=i._iegapmeta,r=e.stores[this.name],u;if(!r||(u=r.indexes[t],!u))return n.apply(this,arguments);f.DB.deleteObjectStore.call(i,u.idxStoreName);delete r.indexes[t];nt(i,this.transaction,e)}});i.prototype.index=r(i.prototype.index,function(n){return function(t){var r=this.transaction.db._iegapmeta.stores[this.name],i;return r?(i=r.indexes[t],i?new et(this.transaction.objectStore(i.idxStoreName).index("k"),this,i.name,i.keyPath,i.multiEntry):n.apply(this,arguments)):n.apply(this,arguments)}});i.prototype.add=r(i.prototype.add,function(n){return function(t,i){var r=dt(this),f,e;return r?r.compound?i?this.add(null):(i=u(l(t,r.keyPath)),new ot({store:this,op:"add",args:[k(t),i],resultMapper:function(n){return s(n)}})):(f=Object.keys(r.indexes),!r.compound&&f.length===0)?n.apply(this,arguments):new ot({store:this,op:"add",args:arguments}):n.apply(this,arguments)}});i.prototype.put=r(i.prototype.put,function(n){return function(t,i){var r=this.transaction.db._iegapmeta.stores[this.name],f,e,h;if(!r)return n.apply(this,arguments);if(r.compound){if(i)return this.add(null);i=u(l(t,r.keyPath));f=n.call(this,t,i)}else f=n.apply(this,arguments);return(e=Object.keys(r.indexes),!r.compound&&e.length===0)?f:(h=this,new o(this,this.transaction,function(n,i){function c(){function i(){--f==0&&n(o,r.compound?s(u):u)}var f=e.length;e.forEach(function(n){var f=r.indexes[n],e=h.transaction.objectStore(f.idxStoreName);bulkDelete(e.index("fk"),u,function(){if(f.multiEntry)addMultiEntryIndexKeys(e,f,t,u,null,i);else if(f.compound)addCompoundIndexKey(e,f,t,u,null,i);else{i();throw"IEGap assert error";}})})}var o=null,u;f.onerror=i;f.onsuccess=function(n){o=n;u=f.result;c()}}))}});i.prototype.delete=r(i.prototype.delete,function(n){return function(t){var i=this.transaction.db._iegapmeta.stores[this.name],r,f,e;return i?(i.compound&&(t=u(t)),r=n.call(this,t),f=Object.keys(i.indexes),f.length==0)?r:(e=this,new o(this,this.transaction,function(n,u){function s(){function u(){--r==0&&n(o)}var r=f.length;f.forEach(function(n){var r=i.indexes[n],f=e.transaction.objectStore(r.idxStoreName);bulkDelete(f.index("fk"),t,u)})}var o=null;r.onerror=u;r.onsuccess=function(n){o=n;s()}})):n.apply(this,arguments)}});i.prototype.clear=r(i.prototype.clear,function(n){return function(){var t=n.apply(this,arguments),i=this.transaction.db._iegapmeta.stores[this.name],r;return i?(r=this,new o(this,this.transaction,function(n,u){function o(){function u(){--t==0&&n(f)}var t=e.length;if(t===0)return n(f);e.forEach(function(n){var f=i.indexes[n],e=r.transaction.objectStore(f.idxStoreName),t=e.clear();t.onerror=ht("clearing meta store",u);t.onsuccess=u})}var e=Object.keys(i.indexes),f=null;t.onerror=u;t.onsuccess=function(n){f=n;o()}})):t}});r(i.prototype,{indexNames:function(n){return{get:function(){var t=[].slice.call(n.get.apply(this)),i=this.transaction.db._iegapmeta.stores[this.name];return i&&(t=t.concat(Object.keys(i.indexes))),new ui(t)}}},autoIncrement:function(n){return{get:function(){var t=this.transaction.db._iegapmeta.stores[this.name];return t&&"autoIncrement"in t?t.autoIncrement:n.get.call(this)}}},keyPath:function(n){return{get:function(){var t=this.transaction.db._iegapmeta.stores[this.name];return t&&"keyPath"in t?t.keyPath:n.get.call(this)}}}});r(g.prototype,{transaction:function(n){return{value:function(t,i){t=typeof t=="string"?[t]:[].slice.call(t);var r=this._iegapmeta.stores;return t.forEach(function(n){var i=r[n];i&&(t=t.concat(i.metaStores))}),i==="readwrite"&&t.push(a),n.value.call(this,t,i||"readonly")}}},objectStoreNames:function(n){return{get:function(){return new ui([].slice.call(n.get.apply(this)).filter(function(n){return n.indexOf("$iegap")!==0}))}}},createObjectStore:function(){return{value:function(n,t){var i,e=!1,r,u;if(t&&Array.isArray(t.keyPath)){if(e=!0,t.autoIncrement)throw new RangeError("Cannot autoincrement compound key");i=f.DB.createObjectStore.call(this,n)}else i=f.DB.createObjectStore.apply(this,arguments);return r=this._iegapmeta,u=r.stores[n]||(r.stores[n]={indexes:{},metaStores:[]}),u.keyPath=t&&t.keyPath||null,u.compound=e,u.autoIncrement=t&&t.autoIncrement||!1,nt(this,i.transaction,r),i}}},deleteObjectStore:function(n){return{value:function(t){n.value.call(this,t);var i=this._iegapmeta,r=i.stores[t];if(r){if(r.metaStores.forEach(function(t){n.value.call(this,t)}),delete i.stores[t],!this._upgradeTransaction)throw"assert error";this._upgradeTransaction.objectStore(a).delete(t);nt(this,this._upgradeTransaction,i)}}}}})}var d={},e=window.IDBKeyRange,i=window.IDBObjectStore,g=window.IDBDatabase,ei=window.IDBIndex,ct="$iegapmeta",a="$iegapAutoIncs",f={DB:{objectStoreNames:Object.getOwnPropertyDescriptor(g.prototype,"objectStoreNames"),deleteObjectStore:g.prototype.deleteObjectStore,createObjectStore:g.prototype.createObjectStore},ObjectStore:{add:i.prototype.add,put:i.prototype.put,"delete":i.prototype.delete,get:i.prototype.get,count:i.prototype.count,openCursor:i.prototype.openCursor,index:i.prototype.index},Index:{openCursor:ei.prototype.openCursor}},at="z",vt="s",yt="d",pt="Z",wt="P",bt="N",kt="0";y(et).from(Object).extend(function(){function n(n,t,i,r){return new h(n,n.objectStore,function(o,h){var l=n._compound,y=Array.isArray(n.objectStore.keyPath),a,v;l&&Array.isArray(t)&&(t=new c(t,t));a=l&&t?e.bound(u(t.lower),u(t.upper),t.lowerOpen,t.upperOpen):t;typeof a=="undefined"&&(a=null);v=f.Index.openCursor.call(n._idx,a,i);v.onerror=h;v.onsuccess=r?function(t){var i=t.target.result,r;i?(r=n._store.get(i.value.fk),r.onerror=h,r.onsuccess=function(){if(!r.result)return i.continue();var u=l?s(i.key):i.key,f=y?s(i.value.fk):i.value.fk;o(t,new tt(i,n,n.objectStore,f,u,r.result))}):o(t,null)}:function(t){var i=t.target.result,r=l?s(i.key):i.key,u=y?s(i.value.fk):i.value.fk;o(t,i&&new tt(i,n,n.objectStore,u,r))}})}return{count:function(n){arguments.length>0&&(arguments[0]=p(n));var t=this;return new h(this,this.objectStore,function(n,i){var r=t._idx.count.apply(this._idx,arguments);r.onsuccess=n;r.onerror=i})},get:function(n){var t=this;return new h(this,this.objectStore,function(i,r){var u=t._idx.get(p(n));u.onsuccess=function(n){var f=u.result&&u.result.fk;f?(u=t.objectStore.get(f),u.onsuccess=function(){i(n,u.result)},u.onerror=r):i(n)};u.onerror=r})},getKey:function(n){var t=this;return new h(this,this.objectStore,function(i,r){var u=t._idx.get(p(n));u.onsuccess=function(n){var t=n.target.result;i(n,t&&t.fk)};u.onerror=r})},openKeyCursor:function(t,i){return n(this,t,i)},openCursor:function(t,i){return n(this,t,i,!0)}}});v(tt.prototype,function(){return{advance:function(n){var t=this;ti(this._store.transaction,function(){t._cursor.advance(n)})},"continue":function(n){var t=this;ti(this._store.transaction,function(){return n?Array.isArray(n)?t._cursor.continue(u(n)):t._cursor.continue(n):t._cursor.continue()})},"delete":function(){return this._store.delete(this.primaryKey)},update:function(n){return this._store.keyPath?this._store.put(n):this._store.put(n,this.primaryKey)}}});v(gt.prototype,function(){return{addEventListener:function(n,t){this._el[n]?this._el[n].push(t):this._el[n]=[t]},removeEventListener:function(n,t){var i=this._el[n],r;i&&(r=i.indexOf(t),r!==-1&&i.splice(r,1))},dispatchEvent:function(n){var t=this["on"+n.type],i,r,f;try{if(t&&t(n)===!1)return!1}catch(u){console.error(u)}if(i=this._el[n.type],i)for(r=0,f=i.length;r<f;++r){t=i[r];try{if((t.handleEvent||t)(n)===!1)return!1}catch(u){console.error(u)}}return!0}}});y(o).from(gt).extend({onsuccess:null,onerror:null});y(ni).from(o).extend({onblocked:null,onupgradeneeded:null});y(h).from(o);y(ot).from(o);bi()}(typeof indexedDB!="undefined"?indexedDB:msIndexedDB);
//# sourceMappingURL=idb-iegap.min.js.map
